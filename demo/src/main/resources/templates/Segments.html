<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Segments</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="/style/tablestyle.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
</head>
<body>
    <div class="container w-50">
        <br/>
        <div class="col d-flex justify-content-center">
            <h1><span th:text="${chapter.label}"></span></h1>
        </div>
        <br/>
        <div th:if = "${param.addingSuccess}" class="d-flex justify-content-center">
            <div class="alert alert-info w-25">Segment succesfully added!</div>
        </div>
        <div th:if = "${param.editingSuccess}" class="d-flex justify-content-center">
            <div class="alert alert-info w-25">Segment succesfully edited!</div>
        </div>
        <br/>
        <br/>
        <div class="d-flex justify-content-center">
            <div class="d-flex flex-column w-100">
                <div th:each = "segment : ${chapter.segments}">
                    <div class="d-flex justify-content-center">
                        <div class="card w-75 text-center text-black mb-3" style="width: 18rem;">
                            <div class="card-body ">
                                <p class="card-text d-flex"><div th:text = "${segment.text}"></div>
                                <p class="card-text d-flex"><div th:unless = "${segment.fileType == ''}"><img th:src="@{/user/segment/image(id=${segment.id})}" width="640px" height="440px" alt="image" class="img-thumbnail"></div>
                                <br/>
                                <div class="d-flex justify-content-between">
                                    <a th:href="@{/user/segment/edit(id=${segment.id}, chapterId=${chapter.id})}"><img src="/images/edit.png" width="40px" height="40px" alt="edit button"></a>
                                    <a th:href="@{/user/segment/delete(id=${segment.id}, chapterId=${chapter.id})}"><img src="/images/bin.png" width="40px" height="40px" alt="delete button"></a>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
        <br/>
        <hr class="w-100">
        <div class="col ms-5">
            <a th:href="@{/user/chapters(id=${chapter.getFolder().getId()}, label=${chapter.label})}" class="btn btn-outline-primary me-1"><img src="/images/return.png" width="25px" height="25px" alt="return button"></a>
            <a th:href="@{/user/segment/addContent(id=${chapter.id})}" class="btn btn-outline-primary"><img src="/images/plus.png" width="20px" height="20px" alt="add button"><span class="ms-2">Add content</span></a>
        </div>
        <br/>
    </div>
</body>
</html>